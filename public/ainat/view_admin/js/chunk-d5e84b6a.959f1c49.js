(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5e84b6a"],{1974:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"article-manager"},[a("div",{staticClass:"i-layout-page-header"},[a("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("router-link",{attrs:{to:{path:"/admin/doudian/product"}}},[a("Button",{staticClass:"mr20",attrs:{icon:"ios-arrow-back",size:"small"},on:{click:e.unload}},[e._v("返回")])],1),a("span",{staticClass:"mr20",domProps:{textContent:e._s(e.$route.params.id?"编辑商品":"添加商品")}})],1),a("div",{attrs:{slot:"content"},slot:"content"},[a("Tabs",{on:{"on-click":e.onClickTab},model:{value:e.artFrom.type,callback:function(t){e.$set(e.artFrom,"type",t)},expression:"artFrom.type"}},e._l(e.headeNum,(function(e,t){return a("TabPane",{key:t,attrs:{label:e.name,name:e.type.toString()}})})),1)],1)])],1),e.Flag?a("cardComponents",{attrs:{ParamsUid:e.ParamsUid,showAlert:e.showAlert},on:{showAlertChange:e.showAlertChange,test:e.releaseProduct}}):e._e()],1)},r=[],o=a("e6c9"),s=a("ce8d"),n=(a("4ad8"),a("2f62")),l=a("cebe"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!==e.infoList?a("div",[a("basic",{directives:[{name:"show",rawName:"v-show",value:"1"===e.showAlert,expression:"showAlert === '1'"}],ref:"$basic",attrs:{infoList:e.info}}),a("graphic",{directives:[{name:"show",rawName:"v-show",value:"2"===e.showAlert,expression:"showAlert === '2'"}],ref:"$grabic",attrs:{infoList:e.info}}),a("priceInventory",{directives:[{name:"show",rawName:"v-show",value:"3"===e.showAlert,expression:"showAlert === '3'"}],ref:"$showAlert",attrs:{infoList:e.info}}),a("paySet",{directives:[{name:"show",rawName:"v-show",value:"4"===e.showAlert,expression:"showAlert === '4'"}],ref:"$payset",attrs:{infoList:e.info}}),a("serviceQulifcaion",{directives:[{name:"show",rawName:"v-show",value:"5"===e.showAlert,expression:"showAlert === '5'"}],ref:"$serviceQulifcaion",attrs:{infoList:e.info}}),"5"!==e.showAlert?a("div",{staticClass:"index_bottom_botn"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.next(e.showAlert)}}},[e._v("下一步")])],1):e._e(),"5"===e.showAlert?a("div",{staticClass:"index_bottom_botn"},[""!==e.ParamsUid?a("Button",{attrs:{type:"dashed",infoList:e.info},on:{click:e.releaseProduct}},[e._v("修改草稿")]):a("Button",{attrs:{type:"dashed",infoList:e.info},on:{click:e.releaseProduct}},[e._v("保存草稿")])],1):e._e()],1):e._e()},d=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("p",{staticClass:"slotTitle"},[e._v("基础信息")]),a("Form",{ref:"formValidate",attrs:{rules:e.ruleValidate,model:e.formValidate}},[a("Row",{attrs:{gutter:24,type:"flex",align:"middle"}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"商品分类","label-width":100,prop:""}},[a("Row",{staticClass:"code-row-bg",staticStyle:{"margin-top":"1px"},attrs:{type:"flex",justify:"start",align:"middle"}},[a("div",{staticClass:"classification"},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"start",align:"middle"}},e._l(e.selectList,(function(t){return a("div",{key:t.level},[""!=t.name?a("div",[1!==t.level?a("Icon",{attrs:{type:"ios-arrow-forward"}}):e._e(),a("span",[e._v(e._s(t.name))])],1):e._e()])})),0)],1),a("div",{staticClass:"postClassification",on:{click:function(t){e.showModal=!0}}},[e._v("\n              修改类目\n            ")])])],1),a("FormItem",{attrs:{label:"商品名称","label-width":100,prop:"name"}},[a("Input",{staticStyle:{width:"80%"},attrs:{maxlength:"30","show-word-limit":"",placeholder:"请输入商品标题"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),a("FormItem",{attrs:{label:"推荐语","label-width":100,prop:"recommend_remark"}},[a("Input",{staticStyle:{width:"80%"},attrs:{maxlength:"50","show-word-limit":"",placeholder:"请输入,限8-50个字"},model:{value:e.formValidate.recommend_remark,callback:function(t){e.$set(e.formValidate,"recommend_remark",t)},expression:"formValidate.recommend_remark"}})],1),a("FormItem",{staticClass:"lmsx",attrs:{label:"类目属性","label-width":100,prop:"product_format"}},[a("Card",{staticClass:"ivu-mt",staticStyle:{background:"rgb(249, 249, 250)",width:"80%"},attrs:{bordered:!1,"dis-hover":""}},[a("Row",{staticClass:"code-row-bg flexJustify",staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex",justify:"space-between"}},e._l(e.formValidate.sxList,(function(t,i){return a("Col",{key:i,staticStyle:{margin:"5px"},attrs:{span:"6"}},[a("FormItem",{attrs:{label:t.property_name,"label-position":"left",prop:t.property_name,rules:{required:t.required}}},["text"===t.type?a("Input",{attrs:{placeholder:"请输入"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}):e._e(),"select"===t.type?a("Select",{model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},e._l(t.options,(function(i){return a("Option",{key:i.value,attrs:{multiple:"multi_select"===t.type,value:i.value}},[e._v(e._s(i.name))])})),1):e._e(),"multi_select"===t.type?a("Select",{attrs:{multiple:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},e._l(t.options,(function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1):e._e()],1)],1)})),1)],1)],1),a("FormItem",{attrs:{label:"同店商品推荐","label-width":100,disabled:""}},[a("Radio",{attrs:{disabled:""},model:{value:e.formValidate.assoc_ids,callback:function(t){e.$set(e.formValidate,"assoc_ids",t)},expression:"formValidate.assoc_ids"}},[e._v("系统推荐")])],1)],1),a("Col")],1)],1),a("router-link",{directives:[{name:"auth",rawName:"v-auth",value:["admin-doudian-product"],expression:"['admin-doudian-product']"}],attrs:{to:"/admin/doudian/product"}},[a("Modal",{on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[a("p",[e._v("离开此页面会导致未保存的内容丢失，确认离开？")])])],1)],1)},u=[],p=a("cca5");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g={computed:h({},Object(n["e"])("admin/doudian",["infoList"])),props:{},data:function(){return{formValidate:{name:"",assoc_ids:"",category_leaf_id:"",sxList:[]},ruleValidate:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],recommend_remark:[{required:!0,message:"请输入推荐语",trigger:"blur"}]},model1:"",showModal:!1,single:"",single1:!0,vertical:"apple",selectList:[],infoListStr:""}},watch:{},moutend:{},methods:{getCateProperty:function(e){var t=this,a={category_leaf_id:this.category_leaf_id};Object(p["a"])(a).then((function(a){if(200===a.data.code&&(t.formValidate.sxList=a.data.data,t.formValidate.sxList.map((function(e){e.value=""})),e)){var i=[];i.push(e.map((function(e){return e.split("|")}))),console.log(i),i.map((function(e){e.map((function(e){t.formValidate.sxList.map((function(t){e[0]===t.property_name&&("multi_select"===t.type?t.value=e[1].split(","):(t.value=e[1],console.log(t.value)))}))}))}))}})).catch((function(e){console.log(e)}))},ok:function(){this.$router.push({path:"/admin/doudian/selectproduct"})},cancel:function(){},validate:function(e,t,a){!1===t&&this.$Message.warning(a)},sendFormValidate:function(){var e=[],t="",a=[];this.selectList.map((function(e){e.name&&a.push(e.name)})),this.formValidate.category_leaf=a.join(","),this.formValidate.sxList.map((function(a){"multi_select"===a.type&&(a.value=a.value.toString(),console.log(a.value)),!0===a.required&&""===a.value&&(t="".concat(a.property_name,"为必填项")),""!==a.value&&e.push({name:a.property_name,value:a.value})})),""===this.formValidate.name&&(t="商品名称为必填项"),""===this.formValidate.recommend_remark&&(t="推荐语为必填项"),""!==t?(this.$Message.warning(t),this.formValidate.product_format=[]):this.formValidate.product_format=e,this.formValidate.category_leaf_id=this.infoList.category_leaf_id||sessionStorage.getItem("category_leaf_id");var i=JSON.parse(JSON.stringify(this.formValidate));return delete i.sxList,i},findIndex:function(e){this.formValidate.sxList.map((function(t){console.log(t),t.property_name==e[0]&&(t.value=t[1])}))},next:function(){this.$emit("showAlertChange","3")}},created:function(){this.selectList=JSON.parse(sessionStorage.getItem("selectList"))},mounted:function(){console.log(this.infoList,"孙组件");var e=this,t=[],a=JSON.stringify(e.infoList);if("{}"!==a){e.category_leaf_id=e.infoList.category_leaf_id,e.formValidate.name=e.infoList.name,e.formValidate.recommend_remark=e.infoList.recommend_remark,e.formValidate.category_leaf_id=e.infoList.category_leaf_id;var i=e.infoList.category_leaf.split(",");e.selectList=[],i.map((function(t,a){e.selectList.push({level:a+1,name:t})}));var r=e.infoList.product_format.split("^");r.map((function(e){t.push(e.split("|"))})),e.getCateProperty(r)}else e.category_leaf_id=sessionStorage.getItem("category_leaf_id"),e.getCateProperty()}},b=g,y=(a("4253"),a("b04d"),a("2877")),v=Object(y["a"])(b,m,u,!1,null,"dcb327ae",null),w=v.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("p",{staticClass:"slotTitle"},[e._v("图文信息")]),a("Form",{ref:"formValidate",attrs:{"label-width":100,model:e.formValidate}},[a("FormItem",{attrs:{label:"商品轮播图",prop:"slider_image",rules:{required:!0},"show-message":!1}},[a("div",{staticClass:"acea-row"},[e._l(e.formValidate.slider_image,(function(t,i){return a("div",{key:i,staticClass:"pictrue",attrs:{draggable:"true"},on:{dragstart:function(a){return e.handleDragStart(a,t)},dragover:function(a){return a.preventDefault(),e.handleDragOver(a,t)},dragenter:function(a){return e.handleDragEnter(a,t)},dragend:function(a){return e.handleDragEnd(a,t)}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item"}]}),a("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(t){return e.handleRemove(i)}}})],1)})),e.formValidate.slider_image.length<5?a("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(t){return e.modalPicTap("duo","recommend_image")}}},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1):e._e(),a("Input",{staticStyle:{display:"none"},model:{value:e.formValidate.slider_image[0],callback:function(t){e.$set(e.formValidate.slider_image,0,t)},expression:"formValidate.slider_image[0]"}})],2),a("div",{staticClass:"tips"},[e._v("(最多5张"),a("br"),e._v("600*600)")])])],1),a("Form",{attrs:{"label-width":100}},[a("FormItem",{attrs:{label:"商品描述",prop:"description_Array",rules:{required:!0},"show-message":!1}},[a("div",{staticClass:"acea-row"},[e._l(e.formValidate.description_Array,(function(t,i){return a("div",{key:i,staticClass:"pictrue",attrs:{draggable:"true"},on:{dragstart:function(a){return e.handleDragStart(a,t)},dragover:function(a){return a.preventDefault(),e.handleDragOver(a,t)},dragenter:function(a){return e.handleDragEnter(a,t)},dragend:function(a){return e.handleDragEnd(a,t)}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item"}]}),a("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(t){return e.handleRemoveDescprtion(i)}}})],1)})),e.formValidate.description_Array.length<42?a("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(t){return e.modalPicTap("duo","description")}}},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1):e._e(),a("Input",{staticStyle:{display:"none"},model:{value:e.formValidate.description_Array[0],callback:function(t){e.$set(e.formValidate.description_Array,0,t)},expression:"formValidate.description_Array[0]"}})],2),a("div",{staticClass:"tips"},[e._v("(最多42张"),a("br"),e._v("600*600)")])])],1),a("Modal",{attrs:{width:"60%",scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":5},model:{value:e.modalPic,callback:function(t){e.modalPic=t},expression:"modalPic"}},[e.modalPic?a("uploadPictures",{attrs:{isChoice:e.isChoice,gridBtn:e.gridBtn,gridPic:e.gridPic},on:{getPic:e.getPic,getPicD:e.getPicD}}):e._e()],1)],1)},k=[],x=a("6625"),O=a.n(x),P=a("b0e7"),F=a("310e"),S=a.n(F);function C(e){return L(e)||I(e)||j()}function j(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function I(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function L(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach((function(t){A(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var B={components:{VueUeditorWrap:O.a,uploadPictures:P["a"]},computed:D({},Object(n["e"])("admin/doudian",["infoList"])),data:function(){return{defaultList:[{name:"a42bdcc1178e62b4694c830f028db5c0",url:"https://o5wwk8baw.qnssl.com/a42bdcc1178e62b4694c830f028db5c0/avatar"},{name:"bc7521e033abdd1e92222d733590f104",url:"https://o5wwk8baw.qnssl.com/bc7521e033abdd1e92222d733590f104/avatar"}],imgName:"",visible:!1,uploadList:[],gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},tableIndex:"",modalPic:!1,isChoice:"",picTit:"",description:[],formValidate:{rule:"",slider_image:[],description:"",description_Array:[],pic:""},myConfig:{autoHeightEnabled:!1,initialFrameHeight:500,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/admin/UEditor/",serverUrl:""}}},methods:{handleRemoveDescprtion:function(e){this.formValidate.description_Array.splice(e,1),this.description.splice(e,1)},handleDragStart:function(e,t){this.dragging=t},handleDragEnd:function(e,t){this.dragging=null},handleDragOver:function(e){e.dataTransfer.dropEffect="move"},handleDragEnter:function(e,t){if(e.dataTransfer.effectAllowed="move",t!==this.dragging){var a=C(this.formValidate.slider_image),i=a.indexOf(this.dragging),r=a.indexOf(t);a.splice.apply(a,[r,0].concat(C(a.splice(i,1)))),this.formValidate.slider_image=a}},handleRemove:function(e){this.formValidate.slider_image.splice(e,1)},modalPicTap:function(e,t,a){this.modalPic=!0,this.isChoice="dan"===e?"单选":"多选",this.picTit=t,this.tableIndex=a},addCustomDialog:function(e){window.UE.registerUI("test-dialog",(function(e,t){var a=new window.UE.ui.Dialog({iframeUrl:"/admin/widget.images/index.html?fodder=dialog",editor:e,name:t,title:"上传图片",cssRules:"width:1200px;height:500px;padding:20px;"});this.dialog=a;var i=new window.UE.ui.Button({name:"dialog-button",title:"上传图片",cssRules:"background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;",onclick:function(){a.render(),a.open()}});return i}),37)},getPic:function(e){switch(this.picTit){case"danFrom":this.formValidate.image=e.att_dir,this.$route.params.id||(0===this.formValidate.spec_type?this.oneFormValidate[0].pic=e.att_dir:(this.manyFormValidate.map((function(t){t.pic=e.att_dir})),this.oneFormBatch[0].pic=e.att_dir));break;case"danTable":this.oneFormValidate[this.tableIndex].pic=e.att_dir;break;case"duopi":this.oneFormBatch[this.tableIndex].pic=e.att_dir;break;case"recommend_image":this.formValidate.recommend_image=e.att_dir;break;default:this.manyFormValidate[this.tableIndex].pic=e.att_dir}this.modalPic=!1},getPicD:function(e){var t=this;this.images=e,this.modalPic=!1,"description"===this.picTit&&this.images.map((function(e){t.description.push(e.att_dir),t.formValidate.description_Array.push(e.att_dir),t.description=t.description.splice(0,42),t.formValidate.description_Array=t.formValidate.description_Array.splice(0,42)})),"recommend_image"===this.picTit&&this.images.map((function(e){t.formValidate.slider_image.push(e.att_dir),t.formValidate.slider_image=t.formValidate.slider_image.splice(0,5)}))},sendFormValidate:function(){this.formValidate.slider_image.length>0&&(this.formValidate.pic=this.formValidate.slider_image.join("|")),this.formValidate.description_Array.length>0&&(this.formValidate.description=this.formValidate.description_Array.join("|"));var e=JSON.parse(JSON.stringify(this.formValidate));return delete e.description_Array,delete e.slider_image,delete e.rule,e}},mounted:function(){var e=JSON.stringify(this.infoList);"{}"!=e&&(this.formValidate.slider_image=[],this.formValidate.description_Array=[],this.formValidate.slider_image=this.infoList.pic.split("|"),this.formValidate.description_Array=this.infoList.description.split("|"))}},N=B,T=(a("6853"),Object(y["a"])(N,V,k,!1,null,null,null)),M=T.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("p",{staticClass:"slotTitle"},[e._v("支付设置")]),a("Form",{ref:"formValidate",attrs:{"label-width":100,rules:e.ruleValidate,model:e.formValidate}},[a("FormItem",{attrs:{label:"支付方式",prop:"name"}},[a("RadioGroup",{attrs:{vertical:""},model:{value:e.vertical,callback:function(t){e.vertical=t},expression:"vertical"}},[a("Radio",{attrs:{label:"zx"}},[a("Icon",{attrs:{type:"social-apple"}}),a("span",[e._v("在线支付")])],1)],1)],1),a("FormItem",{attrs:{label:"减库存类型",prop:"reduce_type"}},[a("RadioGroup",{attrs:{vertical:""},on:{"on-change":e.changeSocial},model:{value:e.formValidate.reduce_type,callback:function(t){e.$set(e.formValidate,"reduce_type",t)},expression:"formValidate.reduce_type"}},[a("Radio",{attrs:{label:"1"}},[a("Icon",{attrs:{type:"social-apple"}}),a("span",[e._v("拍下减库存")])],1),a("Radio",{attrs:{label:"2"}},[a("Icon",{attrs:{type:"social-apple"}}),a("span",[e._v("付款减库存")])],1)],1)],1),a("FormItem",{attrs:{label:"商品限购",prop:"name"}},[a("Card",{staticClass:"ivu-mt",staticStyle:{background:"rgb(249, 249, 250)",width:"80%"},attrs:{bordered:!1,"dis-hover":""}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("Col",{attrs:{span:6}},[a("FormItem",{attrs:{label:"单用户累计限购",prop:"limit_per_buyer"}},[a("Input",{attrs:{placeholder:"每个用户累计限购件数"},model:{value:e.formValidate.limit_per_buyer,callback:function(t){e.$set(e.formValidate,"limit_per_buyer",t)},expression:"formValidate.limit_per_buyer"}}),a("div",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("件")])],1)],1),a("Col",{attrs:{span:6}},[a("FormItem",{attrs:{label:"每次限购",prop:"maximum_per_order"}},[a("Input",{attrs:{placeholder:"每个用户每次下单限购件数"},model:{value:e.formValidate.maximum_per_order,callback:function(t){e.$set(e.formValidate,"maximum_per_order",t)},expression:"formValidate.maximum_per_order"}}),a("div",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("件")])],1)],1),a("Col",{attrs:{span:6}},[a("FormItem",{attrs:{label:"每次至少购买",prop:"name"}},[a("Input",{attrs:{placeholder:"每次至少购买次数"},model:{value:e.formValidate.minimum_per_order,callback:function(t){e.$set(e.formValidate,"minimum_per_order",t)},expression:"formValidate.minimum_per_order"}}),a("div",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("件")])],1)],1)],1)],1)],1)],1)],1)},E=[];function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(a,!0).forEach((function(t){z(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var G,U={computed:q({},Object(n["e"])("admin/doudian",["infoList"])),data:function(){return{vertical:"zx",kucun:"",formatNumber:"",value15:"",formValidate:{reduce_type:1},ruleValidate:{reduce_type:[{required:!0,message:"请选择减库存类型",trigger:"change"}]}}},methods:{sendFormValidate:function(){return this.formValidate},changeSocial:function(e){}},mounted:function(){var e=JSON.stringify(this.infoList);"{}"!=e&&(this.formValidate.reduce_type=this.infoList.reduce_type,this.formValidate.maximum_per_order=this.infoList.maximum_per_order,this.formValidate.limit_per_buyer=this.infoList.limit_per_buyer,this.formValidate.minimum_per_order=this.infoList.minimum_per_order)}},W=U,H=Object(y["a"])(W,R,E,!1,null,"165307ce",null),Q=H.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"start",align:"middle"}},[a("p",{staticClass:"slotTitle"},[e._v("价格库存")])]),"{}"==e.infoListStr?a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"start",align:"middle"}},[a("p",{staticStyle:{"margin-left":"60px",color:"#515a6e","font-size":"12px"}},[e._v("\n        中心商品 :\n      ")]),a("Button",{attrs:{type:"text"},on:{click:e.openModal}},[e._v("导入规格")])],1):e._e(),a("Form",{ref:"formValidate",staticStyle:{padding:"0 20px"},attrs:{"label-width":100,rules:e.ruleValidate,model:e.formValidate,"label-position":e.labelPosition}},[a("FormItem",{attrs:{label:"发货模式",value:e.formValidate.presell_type,prop:"formV"}},[a("RadioGroup",{attrs:{vertical:""},on:{"on-change":e.changePresellType},model:{value:e.presell_type,callback:function(t){e.presell_type=t},expression:"presell_type"}},[a("Radio",{attrs:{label:"现货发货模式",value:"0"}}),a("Radio",{attrs:{label:"全款预售发货模式",value:"1"}}),a("Radio",{attrs:{label:"阶梯发货模式",value:"2"}})],1)],1),1===e.formValidate.presell_type?a("FormItem",{attrs:{label:"承诺发货天数",prop:"delivery_delay_day",value:e.formValidate.delivery_delay_day}},[a("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:e.formValidate.delivery_delay_day,callback:function(t){e.$set(e.formValidate,"delivery_delay_day",t)},expression:"formValidate.delivery_delay_day"}},e._l(e.selectList,(function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1):e._e(),1===e.formValidate.presell_type?a("FormItem",{attrs:{label:"预售结束时间:"}},[a("DatePicker",{staticStyle:{width:"20%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"预售结束时间",option:e.option},model:{value:e.formValidate.presell_end_time,callback:function(t){e.$set(e.formValidate,"presell_end_time",t)},expression:"formValidate.presell_end_time"}})],1):e._e(),1===e.formValidate.presell_type?a("FormItem",{attrs:{label:"预售发货时间",prop:"presell_delay"}},[a("Input",{staticStyle:{width:"15%",margin:"0 10px"},attrs:{placeholder:"请输入预售发货时间"},model:{value:e.formValidate.presell_delay,callback:function(t){e.$set(e.formValidate,"presell_delay",t)},expression:"formValidate.presell_delay"}}),a("span",[e._v("天发货")])],1):e._e(),2===e.formValidate.presell_type?a("FormItem",{attrs:{label:"阶梯发货时间",prop:"presell_delay"}},[a("span",[e._v("预售结束后")]),a("Input",{staticStyle:{width:"15%",margin:"0 10px"},attrs:{placeholder:"请输入预售发货时间"},model:{value:e.formValidate.presell_delay,callback:function(t){e.$set(e.formValidate,"presell_delay",t)},expression:"formValidate.presell_delay"}}),a("span",[e._v("天发货")])],1):e._e(),0===e.formValidate.presell_type||2===e.formValidate.presell_type?a("FormItem",{attrs:{label:"现货发货时间",rules:{required:!0}}},[a("p",[e._v("48小时")]),a("p",{staticStyle:{"font-size":"12px","font-weight":"400",color:"#aaabaf"}},[e._v("\n          现货发货模式下生成的订单平台统一规定发货时间为"),a("span",{staticStyle:{color:"rgb(85, 88, 92)"}},[e._v("48小时")]),e._v(",请严格按照承诺发货时间进行发货，超时未发货会受到相关处罚。\n        ")])]):e._e(),a("FormItem",{attrs:{label:"商品规格：",rules:{required:!0},props:"spec_type"}},[a("RadioGroup",{staticStyle:{display:"none"},on:{"on-change":e.changeSpec},model:{value:e.formValidate.spec_type,callback:function(t){e.$set(e.formValidate,"spec_type",t)},expression:"formValidate.spec_type"}},[a("Radio",{staticClass:"radio",attrs:{label:0}},[e._v("单规格")]),a("Radio",{attrs:{label:1}},[e._v("多规格")])],1)],1),0!==e.attrs.length?a("FormItem",[a("draggable",{staticClass:"dragArea list-group",attrs:{list:e.attrs,group:"peoples",handle:".move-icon",move:e.checkMove},on:{end:e.end}},e._l(e.attrs,(function(t,i){return a("div",{key:i,staticClass:"acea-row row-middle mb10"},[a("div",{staticClass:"move-icon"},[a("span",{staticClass:"iconfont icondrag2"})]),a("div",{class:e.moveIndex===i?"borderStyle":"",staticStyle:{width:"90%"}},[a("div",{staticClass:"acea-row row-middle"},[a("span",{staticClass:"mr5"},[e._v(e._s(t.value))])]),0===i?a("Checkbox",{on:{"on-change":e.changeSingle},model:{value:e.single_detailImg,callback:function(t){e.single_detailImg=t},expression:"single_detailImg"}},[e._v("添加规格图片")]):e._e(),a("div",{staticClass:"rulesBox"},e._l(t.detail,(function(t,r){return a("div",{key:r},[a("Tag",{key:r,staticClass:"mr20 drag",attrs:{type:"dot",color:"primary",name:t}},[e._v(e._s(t))]),0===i&&e.single_detailImg?a("div",{staticClass:"acea-row row-middle row-center-wrapper pictrueBox"},[e.spacePic[r].spec_pic?a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.spacePic[r].spec_pic,expression:"spacePic[indexn].spec_pic"}]})]):a("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)]):e._e()],1)})),0)],1)])})),0)],1):e._e(),e.createBnt?a("FormItem",[a("Button",{attrs:{type:"success"},on:{click:function(t){return e.generate(1)}}},[e._v("立即生成")])],1):e._e(),e.showIput?a("div",[a("FormItem",{attrs:{label:"规格："}},[a("Input",{attrs:{placeholder:"请输入规格"},model:{value:e.formDynamic.attrsName,callback:function(t){e.$set(e.formDynamic,"attrsName",t)},expression:"formDynamic.attrsName"}})],1),a("FormItem",{attrs:{label:"规格值："}},[a("Input",{attrs:{placeholder:"请输入规格值"},model:{value:e.formDynamic.attrsVal,callback:function(t){e.$set(e.formDynamic,"attrsVal",t)},expression:"formDynamic.attrsVal"}})],1),a("FormItem",[a("Button",{staticClass:"mr15",attrs:{type:"primary"},on:{click:e.createAttrName}},[e._v("确定")]),a("Button",{on:{click:e.offAttrName}},[e._v("取消")])],1)],1):e._e(),e.manyFormValidate.length&&0!==e.formValidate.header.length?a("FormItem",{staticClass:"labeltop",attrs:{label:"批量设置："}},[a("Table",{attrs:{data:e.oneFormBatch,columns:e.columns2,border:""},scopedSlots:e._u([{key:"pic",fn:function(t){t.row;var i=t.index;return[a("div",{staticClass:"acea-row row-middle row-center-wrapper",nativeOn:{click:function(t){return e.modalPicTap("dan","duopi",i)}}},[e.oneFormBatch[0].pic?a("div",{staticClass:"pictrue pictrueTab"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.oneFormBatch[0].pic,expression:"oneFormBatch[0].pic"}]})]):a("div",{staticClass:"upLoad pictrueTab acea-row row-center-wrapper"},[a("Icon",{staticClass:"iconfont",attrs:{type:"ios-camera-outline",size:"21"}})],1)])]}},{key:"price",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormBatch[0].price,callback:function(t){e.$set(e.oneFormBatch[0],"price",t)},expression:"oneFormBatch[0].price"}})]}},{key:"stock_num",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormBatch[0].stock_num,callback:function(t){e.$set(e.oneFormBatch[0],"stock_num",t)},expression:"oneFormBatch[0].stock_num"}})]}},{key:"code",fn:function(t){t.row,t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{min:0},model:{value:e.oneFormBatch[0].code,callback:function(t){e.$set(e.oneFormBatch[0],"code",t)},expression:"oneFormBatch[0].code"}})]}},{key:"action",fn:function(t){t.row,t.index;return[a("a",{on:{click:e.batchAdd}},[e._v("批量添加")]),a("Divider",{attrs:{type:"vertical"}}),a("a",{on:{click:e.batchDel}},[e._v("清空")])]}}],null,!1,949242422)})],1):e._e(),e.manyFormValidate.length?a("FormItem",{staticClass:"labeltop",attrs:{label:"商品属性："}},[a("Table",{attrs:{data:e.manyFormValidate,columns:e.formValidate.header,border:""},scopedSlots:e._u([{key:"price",fn:function(t){t.row;var i=t.index;return[a("Input",{staticClass:"priceBox",attrs:{type:"number",number:"",min:0},model:{value:e.manyFormValidate[i].price,callback:function(t){e.$set(e.manyFormValidate[i],"price",t)},expression:"manyFormValidate[index].price"}})]}},{key:"stock_num",fn:function(t){t.row;var i=t.index;return[a("InputNumber",{staticClass:"priceBox",attrs:{number:"",min:0},model:{value:e.manyFormValidate[i].stock_num,callback:function(t){e.$set(e.manyFormValidate[i],"stock_num",t)},expression:"manyFormValidate[index].stock_num"}})]}},{key:"code",fn:function(t){t.row;var i=t.index;return[a("Input",{staticClass:"priceBox",attrs:{number:"",min:0,disabled:""},model:{value:e.manyFormValidate[i].code,callback:function(t){e.$set(e.manyFormValidate[i],"code",t)},expression:"manyFormValidate[index].code"}})]}},{key:"action",fn:function(e){e.row,e.index}}],null,!1,4136814806)})],1):e._e(),a("Form-item",{attrs:{label:"售卖价",prop:"discount_price"}},[a("Input",{staticStyle:{width:"50%"},attrs:{maxlength:"50",placeholder:"请输入售卖价"},model:{value:e.formValidate.discount_price,callback:function(t){e.$set(e.formValidate,"discount_price",t)},expression:"formValidate.discount_price"}})],1),a("Form-item",{attrs:{label:"划线价",prop:"market_price"}},[a("Input",{staticStyle:{width:"50%"},attrs:{maxlength:"50",placeholder:"请输入划线价"},model:{value:e.formValidate.market_price,callback:function(t){e.$set(e.formValidate,"market_price",t)},expression:"formValidate.market_price"}})],1),a("Form-item",{attrs:{label:"重量",prop:"weight"}},[a("Input",{staticStyle:{width:"50%"},attrs:{maxlength:"50",placeholder:"请输入重量"},model:{value:e.formValidate.weight,callback:function(t){e.$set(e.formValidate,"weight",t)},expression:"formValidate.weight"}})],1)],1)],1),a("TablePrice",{ref:"tablePrice",attrs:{modalShow:e.modalShow,centerGoods:e.centerGoods},on:{formSelection:e.tablePriceOk}}),a("Modal",{attrs:{width:"60%",scrollable:"","footer-hide":"",closable:"",title:"上传商品图","mask-closable":!1,"z-index":1},model:{value:e.modalPic,callback:function(t){e.modalPic=t},expression:"modalPic"}},[e.modalPic?a("uploadPictures",{attrs:{isChoice:e.isChoice,gridBtn:e.gridBtn,gridPic:e.gridPic},on:{getPic:e.getPic,getPicD:e.getPicD}}):e._e()],1)],1)},Y=[],K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Modal",{attrs:{title:"规格列表"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:e.columns,data:e.centerGoods.data,"highlight-row":"",loading:e.loading,"no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},on:{"on-row-click":e.onSelectTab},scopedSlots:e._u([{key:"c_image",fn:function(e){var t=e.row;return[a("viewer",[a("div",{staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.c_image,expression:"row.c_image"}]})])])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:e.total,current:e.centerGoods.page,"show-elevator":"","show-total":"","page-size":e.centerGoods.limit},on:{"on-change":e.pageChange}})],1)],1)],1)},Z=[],ee={props:{centerGoods:{default:function(){return{}},type:Object}},data:function(){return{modalShow:!1,modal1:"",loading:!1,total:10,columns:[{title:"ID",key:"id",width:80},{title:"描述",key:"c_description",width:80},{title:"图片",slot:"c_image",width:80},{title:"名字",key:"c_name",width:80},{title:"商品编号",key:"c_product_no",width:80},{title:"md5",key:"c_spec_md5",width:80},{title:"创建时间",key:"create_time",width:80}],formSelection:"",ids:""}},methods:{ok:function(){this.$emit("formSelection",this.formSelection),this.modalShow=!1},cancel:function(){this.modalShow=!1},open:function(){this.modalShow=!0},onSelectTab:function(e){this.formSelection=e},sortChanged:function(){},selectAll:function(){},onSelectCancel:function(){},pageChange:function(){}}},te=ee,ae=(a("cf3e"),Object(y["a"])(te,K,Z,!1,null,"0da17882",null)),ie=ae.exports,re=a("7cba"),oe=a("c4c8");function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(a,!0).forEach((function(t){le(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ce={components:{TablePrice:ie,draggable:S.a,uploadPictures:P["a"]},data:function(){return{selectList:[{label:2,value:2},{label:3,value:3},{label:5,value:5},{label:7,value:7},{label:10,value:10},{label:15,value:15}],presell_type:"",option:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},oneFormValidate:[{stock_num:"",price:"",code:"",action:""}],single_detailImg:!1,gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},moveIndex:"",showIput:"",createBnt:"",manyFormValidate:[],spacePic:[{spec_pic:"",id:0}],attrs:[],spec_type:0,single:!1,guige:"",ruleList:[],formValidate:{spec_type:"",selectRule:"",presell_type:0,id:0,slider_image:[],recommend_image:[],presell_delay:3,presell_end_time:"",delivery_delay_day:2,sku:[{spec_detail_name1:"",spec_detail_name2:"",spec_detail_name3:"",stock_num:"",code:"",price:""}],header:[]},ruleValidate:{spec_type:[{required:!0,message:"请选择商品规格",trigger:"blur"}],selectRule:[{required:!0,message:"请选择商品规格属性",trigger:"blur"}],delivery_delay_day:[{required:!0,message:"请选择承诺发货天数",trigger:"select"}],presell_delay:[{required:!0,message:"请填写发货时间",trigger:"blur"}],discount_price:[{required:!0,message:"请填写售卖价",trigger:"blur"}],market_price:[{required:!0,message:"请填写划线价",trigger:"blur"}],weight:[{required:!0,message:"请填写重量",trigger:"blur"}]},modalShow:!1,defaultList:[],columns2:[{title:"售价",slot:"price",align:"center",minWidth:95},{title:"库存",slot:"stock_num",align:"center",minWidth:95},{title:"操作",slot:"action",fixed:"right",align:"center",minWidth:140}],columns:[],oneFormBatch:[{price:0,code:0,stock_num:0}],uploadIsOk:!1,centerGoods:{},firstFlag:!1,centerGoodsXq:{sku:[]},set_index:0,attr:[],formDynamic:{attrsName:"",attrsVal:""},modalPic:!1,isChoice:"",picTit:"",tableIndex:"",skuList:[],centerSkuIndex:"",infoListStr:""}},computed:ne({},Object(n["e"])("admin/doudian",["infoList"]),{labelPosition:function(){return this.isMobile?"top":"right"}}),methods:(G={openModal:function(){this.modalShow=!0},tablePriceOk:function(e){this.getcenterGoodsXq(e.id)},getPic:function(e){switch(this.picTit){case"danFrom":this.formValidate.image=e.att_dir,this.$route.params.id||(0===this.formValidate.spec_type?this.oneFormValidate[0].pic=e.att_dir:(this.manyFormValidate.map((function(t){t.spec_pic=e.att_dir})),console.log(this.manyFormValidate),this.oneFormBatch[0].spec_pic=[]));break;case"danTable":this.spacePic[this.tableIndex].spec_pic=e.att_dir;break;case"duopi":this.oneFormBatch[this.tableIndex].spec_pic=e.att_dir;break;case"recommend_image":this.formValidate.recommend_image=e.att_dir;break;default:this.spacePic[this.tableIndex].spec_pic=e.att_dir,console.log(this.spacePic)}this.modalPic=!1},getPicD:function(e){var t=this;this.images=e,this.images.map((function(e){t.formValidate.slider_image.push(e.att_dir),t.formValidate.slider_image=t.formValidate.slider_image.splice(0,10)})),this.modalPic=!1},modalPicTap:function(e,t,a){console.log("1234"),this.modalPic=!0,this.isChoice="dan"===e?"单选":"多选",this.picTit=t,this.tableIndex=a},batchDel:function(){this.oneFormBatch=[{price:0,code:0,stock_num:0}]},batchAdd:function(){var e=!0,t=!1,a=void 0;try{for(var i,r=this.manyFormValidate[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.oneFormBatch[0].code&&this.$set(o,"code",this.oneFormBatch[0].code),this.oneFormBatch[0].price>0&&this.$set(o,"price",this.oneFormBatch[0].price),this.oneFormBatch[0].stock_num>0&&this.$set(o,"stock_num",this.oneFormBatch[0].stock_num)}}catch(s){t=!0,a=s}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}},offAttrName:function(){this.showIput=!1,this.createBnt=!0},checkMove:function(e){this.moveIndex=e.draggedContext.index},end:function(){this.moveIndex=""},clearAttr:function(){this.formDynamic.attrsName="",this.formDynamic.attrsVal=""},handleRemoveRole:function(e){this.attrs.splice(e,1),this.manyFormValidate.splice(e,1)},createAttrName:function(){if(this.formDynamic.attrsName&&this.formDynamic.attrsVal){var e={value:this.formDynamic.attrsName,detail:[this.formDynamic.attrsVal]};this.attrs.push(e);var t={};this.attrs=this.attrs.reduce((function(e,a){return!t[a.value]&&(t[a.value]=e.push(a)),e}),[]),this.clearAttr(),this.showIput=!1,this.createBnt=!0}else this.$Message.warning("请添加完整的规格！")},createAttr:function(e,t){if(e){this.attrs[t].detail.push(e);var a={};this.attrs[t].detail=this.attrs[t].detail.reduce((function(e,t){return!a[t]&&(a[t]=e.push(t)),e}),[])}else this.$Message.warning("请添加属性")},changeSpec:function(){var e=this;this.formValidate.is_sub=[];var t=this.$route.params.id;t&&Object(oe["e"])(t).then((function(e){})).catch((function(t){e.formValidate.spec_type=e.spec_type,e.$Message.error(t.msg)}))},handleRemove2:function(e,t){e.splice(t,1)},confirm:function(){this.createBnt=!0;var e=this;if(this.formValidate.selectRule.trim().length<=0)return e.$Message.error("请选择属性");this.ruleList.forEach((function(t,a){t.rule_name===e.formValidate.selectRule&&(e.attrs=t.rule_value,console.log(e.attrs))}))},generate:function(e){var t=this;Object(re["d"])(this.centerSkuIndex).then((function(e){var a=e.data.data,i=JSON.parse(JSON.stringify(a.header));console.log(a),"0"!==t.$route.params.id&&(t.manyFormValidate=a.value),t.formValidate.header=i;var r=a.header;r.pop(),t.columnsInstalM=a.header,console.log(i)})).catch((function(e){t.$Message.error(e.msg)}))},addBtn:function(){this.clearAttr(),this.createBnt=!1,this.showIput=!0}},le(G,"openModal",(function(){this.$refs.tablePrice.open()})),le(G,"addRule",(function(){this.$refs.addattr.modal=!0})),le(G,"showModal_Close",(function(e){console.log(e)})),le(G,"handleBeforeUpload",(function(){})),le(G,"handleFormatError",(function(){})),le(G,"handleMaxSize",(function(){})),le(G,"handleSuccess",(function(){})),le(G,"getcenterGoods",(function(e){var t=this;Object(re["c"])(e).then((function(e){200===e.data.code&&(t.centerGoods=e.data.data)}))})),le(G,"getcenterGoodsXq",(function(e){var t=this;this.attrs=[],Object(re["h"])(e).then((function(e){var a=[];console.log(e.data.data.sku),e.data.data.sku.map((function(e,t){a.push({price:"",stock_num:"",code:"",spec_detail_name1:"",spec_detail_name2:"",spec_detail_name3:"",id:""}),a[t].price=e.c_sku_price,a[t].stock_num=e.c_sku_stock_num,a[t].code=e.c_sku_no,a[t].spec_detail_name1=e.c_spec_name1,a[t].spec_detail_name2=e.c_spec_name2,a[t].spec_detail_name3=e.c_spec_name3,a[t].id=e.id})),t.manyFormValidate=a,console.log(t.manyFormValidate);var i=e.data.data.specs,r=[],o=[];t.formValidate.header=[],o=[{align:"center",minWidth:120,slot:"price",title:"售价"},{align:"center",minWidth:120,slot:"stock_num",title:"库存"},{align:"center",minWidth:120,slot:"code",title:"商品编码"}],i.map((function(e,t){r.unshift({align:"center",key:"spec_detail_name".concat(t+1),title:e.c_spec_name})})),r=r.reverse(),t.formValidate.header=t.formValidate.header.concat(r,o),console.log(t.manyFormValidate),t.centerSkuIndex=e.data.data.id,t.formValidate.spec_type=1,t.skuList=e.data.data.specs,t.skuList.map((function(e,a){var i=e.c_spec_value.split(",");t.attrs.push({value:e.c_spec_name,detail:i}),t.spacePic.push({space_pic:"",id:a})}))}))})),le(G,"changeSpec",(function(){var e=this;this.formValidate.is_sub=[];var t=this.$route.params.id;t&&Object(oe["e"])(t).then((function(e){})).catch((function(t){e.formValidate.spec_type=e.spec_type,e.$Message.error(t.msg)}))})),le(G,"changePresellType",(function(e){switch(this.sendFormValidate(),e){case"现货发货模式":this.formValidate.presell_type=0;break;case"全款预售发货模式":this.formValidate.presell_type=1;break;case"阶梯发货模式":this.formValidate.presell_type=2;break;default:break}})),le(G,"sendFormValidate",(function(){this.infoList!=={}?this.sendFormValidatePut():this.sendFormValidatePost()})),le(G,"sendFormValidatePost",(function(){var e=this;this.formValidate.sku=[],this.formValidate.c_product_id=this.centerSkuIndex,this.manyFormValidate.map((function(t){e.formValidate.sku.push({spec_detail_name1:t.spec_detail_name1||"",spec_detail_name2:t.spec_detail_name2||"",spec_detail_name3:t.spec_detail_name3||"",stock_num:t.stock_num,code:t.code,price:t.price})}));var t=JSON.parse(JSON.stringify(this.formValidate));return delete t.selectRule,delete t.spec_type,t})),le(G,"sendFormValidatePut",(function(){this.formValidate.c_product_id=this.infoList.c_product_id;var e=JSON.parse(JSON.stringify(this.formValidate));return delete e.selectRule,delete e.spec_type,e})),le(G,"changeSingle",(function(){var e=this,t=[];this.spacePic=[],this.attrs.map((function(e,a){t.push(e.detail)}));var a=t[0];this.manyFormValidate.map((function(t,i){t.spec_detail_name1===a[i]&&e.spacePic.push({id:i,spec_pic:t.c_sku_pic})})),this.manyFormValidate.map((function(t){e.formValidate.sku.push({spec_detail_name1:t.c_spec_name1||"",spec_detail_name2:t.c_spec_name2||"",spec_detail_name3:t.c_spec_name3||"",stock_num:t.c_sku_stock_num,code:t.c_sku_no,price:t.c_sku_price})}))})),le(G,"changeInfoList",(function(){switch(this.formValidate.delivery_delay_day=this.infoList.delivery_delay_day,this.formValidate.presell_type=this.infoList.presell_type,this.formValidate.presell_delay=this.infoList.presell_delay,this.formValidate.presell_end_time=this.infoList.presell_end_time,this.formValidate.weight=this.infoList.weight,this.formValidate.market_price=this.infoList.market_price,this.formValidate.discount_price=this.infoList.discount_price,this.formValidate.sku=this.infoList.sku,this.infoList.presell_type){case"0":this.presell_type="现货发货模式";break;case"1":this.presell_type="全款预售发货模式";break;case"2":this.presell_type="阶梯发货模式";break;default:break}this.getSku(this.formValidate.sku)})),le(G,"getSku",(function(e){this.manyFormValidate=e;var t=[],a=[];t.map((function(e,t){a.unshift({align:"center",key:"c_spec_name".concat(t+1),title:e.c_spec_name})})),a=a.reverse();var i=this;this.formValidate.header=i.infoList.header})),G),created:function(){this.firstFlag=!1,this.set_index=0},mounted:function(){this.infoListStr=JSON.stringify(this.infoList),"{}"!=this.infoListStr?(this.changeInfoList(),this.formValidate.c_product_id=this.infoList.c_product_id):this.getcenterGoods()}},de=ce,me=(a("648f"),Object(y["a"])(de,X,Y,!1,null,"1bc736a2",null)),ue=me.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("p",{staticClass:"slotTitle"},[e._v("服务与资质")]),a("Form",{ref:"formValidate",attrs:{rules:e.ruleValidate,model:e.formValidate,"label-width":100}},[a("FormItem",{attrs:{label:"提取方式",prop:"freight_id"}},[a("Radio",{attrs:{disabled:""},model:{value:e.single,callback:function(t){e.single=t},expression:"single"}},[e._v("使用物流配送")]),a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"start",align:"middle"}},[a("div",{staticStyle:{"margin-right":"10px"}},[e._v("运费模板")]),a("Select",{staticStyle:{width:"200px"},model:{value:e.formValidate.freight_id,callback:function(t){e.$set(e.formValidate,"freight_id",t)},expression:"formValidate.freight_id"}},e._l(e.freightTemplateList,(function(t,i){return a("Option",{key:t.id,attrs:{value:i}},[e._v(e._s(t.template.template_name))])})),1)],1)],1),a("FormItem",{attrs:{label:"是否支持7天无理由","label-width":150,prop:"supply_7day_return"}},[a("RadioGroup",{on:{"on-change":e.checkAllGroupChange},model:{value:e.supply_7day_return,callback:function(t){e.supply_7day_return=t},expression:"supply_7day_return"}},[a("Radio",{attrs:{label:"支持"}}),a("Radio",{attrs:{label:"不支持"}}),a("Radio",{attrs:{label:"支持,拆封后不支持"}})],1)],1),a("FormItem",{attrs:{label:"客服电话",prop:"mobile"}},[a("Input",{staticStyle:{width:"20%"},attrs:{placeholder:"请输入客户电话"},model:{value:e.formValidate.mobile,callback:function(t){e.$set(e.formValidate,"mobile",t)},expression:"formValidate.mobile"}})],1),a("FormItem",{attrs:{label:"商家备注",prop:"remark"}},[a("Input",{staticStyle:{width:"60%"},attrs:{maxlength:"50","show-word-limit":"",placeholder:"请输入商家备注"},model:{value:e.formValidate.remark,callback:function(t){e.$set(e.formValidate,"remark",t)},expression:"formValidate.remark"}})],1)],1)],1)},fe=[];function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function _e(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(a,!0).forEach((function(t){ge(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var be={computed:_e({},Object(n["e"])("admin/doudian",["infoList"])),data:function(){return{ruleValidate:{freight_id:[{required:!0,message:"请选择运费模板",trigger:"blur"}],mobile:[{required:!0,message:"请输入电话号码",trigger:"blur"}],supply_7day_return:[{required:!0,message:"请选择是否支持7天无理由",trigger:"blur"}]},supply_7day_return:"支持",formValidate:{recommend_image:""},value:"",single:!0,checkAll:!1,freightTemplateList:[],checkAllGroup:["7天无理由退换货，该类目商品须支持【7天无理由退换货】服务","订单完成15天内售后保障"],cityList:[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}],model1:""}},methods:{handleCheckAll:function(){this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?this.checkAllGroup=["7天无理由退换货，该类目商品须支持【7天无理由退换货】服务","订单完成15天内售后保障"]:this.checkAllGroup=[]},checkAllGroupChange:function(e){"支持"===e&&(this.formValidate.supply_7day_return=1),"不支持"===e&&(this.formValidate.supply_7day_return=0),"支持,拆封后不支持"===e&&(this.formValidate.supply_7day_return=2)},sendFormValidate:function(){JSON.parse(JSON.stringify(this.formValidate));return this.formValidate},getFreightTemplate:function(){var e=this;Object(p["b"])().then((function(t){200===t.data.code&&(e.freightTemplateList=t.data.data.List)}))}},created:function(){this.getFreightTemplate()},mounted:function(){var e=JSON.stringify(this.infoList);"{}"!=e&&(this.formValidate.mobile=this.infoList.mobile,this.formValidate.supply_7day_return=this.infoList.supply_7day_return,this.formValidate.freight_id=this.infoList.freight_id)}},ye=be,ve=Object(y["a"])(ye,pe,fe,!1,null,null,null),we=ve.exports;function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(a,!0).forEach((function(t){xe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Oe={computed:ke({},Object(n["e"])("admin/doudian",["infoList"])),data:function(){return{pustFormValidateDate:{},info:{}}},props:{showAlert:{default:"1",type:String},ParamsUid:{default:"",type:String}},watch:{showAlert:function(e,t){this.$forceUpdate()},infoList:function(e,t){this.info=e}},methods:{next:function(e){var t=(Number(e)+1).toString();this.$emit("showAlertChange",t)},releaseProduct:function(){var e=this.$refs.$basic.sendFormValidate(),t=this.$refs.$grabic.sendFormValidate(),a="";a=""===this.ParamsUid?this.$refs.$showAlert.sendFormValidatePost():this.$refs.$showAlert.sendFormValidatePut(),console.log(a,"showAlert_Object");var i=this.$refs.$payset.sendFormValidate(),r=this.$refs.$serviceQulifcaion.sendFormValidate();if(e.product_format.length<=0)return this.$emit("showAlertChange","1"),!1;if(""===t.description)return this.$Message.warning("描述方式不能为空"),this.$emit("showAlertChange","2"),!1;if(""===t.pic)return this.$Message.warning("商品主图不能为空"),this.$emit("showAlertChange","2"),!1;if(a.sku===[])return this.$Message.warning("sku不能为空"),this.$emit("showAlertChange","3"),!1;if(""===a.weight)return this.$Message.warning("重量不能为空"),this.$emit("showAlertChange","3"),!1;if(""===r.mobile)return this.$Message.warning("电话不能为空"),!1;this.pustFormValidateDate=Object.assign(e,t,a,i,r),console.log(this.pustFormValidateDate),this.pustFormValidateDate.uid=this.ParamsUid;var o=JSON.parse(JSON.stringify(this.pustFormValidateDate));o.product_format=JSON.stringify(this.pustFormValidateDate.product_format),o.sku=JSON.stringify(this.pustFormValidateDate.sku),delete o.header;var s="";s=JSON.stringify(this.infoList),"{}"===s?this.postProduceList(o):this.putPrduceList(o)},postProduceList:function(e){var t=this;Object(p["h"])(e).then((function(e){200==e.data.code?(t.$Message.success(e.data.msg),t.$router.push({path:"/admin/doudian/product"})):t.$Message.warning(e.data.msg)}))},putPrduceList:function(e){var t=this;Object(p["i"])(e).then((function(e){200==e.data.code?(t.$Message.success(e.data.msg),t.$router.push({path:"/admin/doudian/product"})):t.$Message.warning(e.data.msg)}))}},mounted:function(){console.log(this.infoList,"子组件")},components:{basic:w,graphic:M,paySet:Q,priceInventory:ue,serviceQulifcaion:we}},Pe=Oe,Fe=(a("8fef"),Object(y["a"])(Pe,c,d,!1,null,"1c5809e6",null)),Se=Fe.exports;function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach((function(t){Ie(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Le={name:"product_productList",components:{expandRow:o["a"],attribute:s["a"],taoBao:l["a"],cardComponents:Se},computed:je({},Object(n["e"])("admin/doudian",["infoList"]),{labelWidth:function(){return this.isMobile?void 0:75},labelPosition:function(){return this.isMobile?"top":"right"}}),data:function(){return{Flag:!0,category_leaf_id:0,tableList:[],sxList:[],showAlert:"1",ParamsUid:"",headeNum:[{count:0,name:"基础信息",type:1},{count:1,name:"图文信息",type:2},{count:2,name:"价格库存",type:3},{count:3,name:"支付设置",type:4},{count:4,name:"服务与资质",type:5}]}},methods:{onClickTab:function(e){console.log(e),this.showAlert=e},artFrom:function(){},pustFormValidateDate:function(e){console.log(e)},releaseProduct:function(e){console.log(e)},showAlertChange:function(e){this.showAlert=e,this.artFrom.type=e},getInfo:function(){var e=this;Object(p["c"])(this.$route.params.id).then((function(t){console.log(e.infoList),e.$store.dispatch("admin/doudian/setInfoState",JSON.parse(JSON.stringify(t.data.data)))})).catch((function(t){e.$Message.error(t)}))},unload:function(){this.$destroy(!0)}},created:function(){},beforeMounted:function(){window.HomeisMounted=this._isMounted},mounted:function(){"0"!==this.$route.params.id&&this.$route.params.id&&this.getInfo(),console.log(this.infoList,"父组件"),this.category_leaf_id=sessionStorage.getItem("category_leaf_id"),this.ParamsUid=this.$route.params.id,window.HomeisMounted=this._isMounted},onunload:function(){}},$e=Le,De=(a("7d12"),Object(y["a"])($e,i,r,!1,null,"2e2f368b",null));t["default"]=De.exports},3358:function(e,t,a){},4086:function(e,t,a){},4253:function(e,t,a){"use strict";var i=a("69ff"),r=a.n(i);r.a},4371:function(e,t,a){},"648f":function(e,t,a){"use strict";var i=a("3358"),r=a.n(i);r.a},6853:function(e,t,a){"use strict";var i=a("b1e2"),r=a.n(i);r.a},"69ff":function(e,t,a){},"7d12":function(e,t,a){"use strict";var i=a("d144"),r=a.n(i);r.a},8364:function(e,t,a){},"8fef":function(e,t,a){"use strict";var i=a("4086"),r=a.n(i);r.a},b04d:function(e,t,a){"use strict";var i=a("4371"),r=a.n(i);r.a},b1e2:function(e,t,a){},cf3e:function(e,t,a){"use strict";var i=a("8364"),r=a.n(i);r.a},d144:function(e,t,a){}}]);