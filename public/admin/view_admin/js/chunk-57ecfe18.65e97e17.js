(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57ecfe18"],{"1ae7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("Form",{ref:"formValidate",attrs:{"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",{attrs:{gutter:16,type:"flex"}},[a("Col",{staticStyle:{"line-height":"40px"},attrs:{xs:10,sm:12,md:16,lg:18}},[a("Col",{attrs:{xs:24,sm:12,md:8,lg:6}},[a("Col",{staticClass:"shtitle",attrs:{span:"5"}},[a("span",{staticClass:"shtitle"},[t._v("名称")])]),a("Col",{attrs:{span:"17"}},[a("Input",{staticClass:"shinput",attrs:{placeholder:"请输入完整企业名称","element-id":"name",clearable:""},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1)],1),a("Col",{attrs:{xs:24,sm:12,md:8,lg:6}},[a("Col",{staticClass:"shtitle",attrs:{span:"5"}},[a("span",{staticClass:"shtitle"},[t._v("信用代码")])]),a("Col",{attrs:{span:"17"}},[a("Input",{staticClass:"shinput",attrs:{placeholder:"请输入","element-id":"id_card",clearable:""},model:{value:t.formValidate.credit_code,callback:function(e){t.$set(t.formValidate,"credit_code",e)},expression:"formValidate.credit_code"}})],1)],1),a("Col",{attrs:{xs:24,sm:12,md:8,lg:6}},[a("Col",{staticClass:"shtitle",attrs:{span:"5"}},[a("span",{staticClass:"shtitle"},[t._v("联络人")])]),a("Col",{attrs:{span:"17"}},[a("Input",{staticClass:"shinput",attrs:{placeholder:"请输入","element-id":"link_man",clearable:""},model:{value:t.formValidate.link_man,callback:function(e){t.$set(t.formValidate,"link_man",e)},expression:"formValidate.link_man"}})],1)],1),a("Col",{attrs:{xs:24,sm:12,md:8,lg:6}},[a("Col",{staticClass:"shtitle",attrs:{span:"5"}},[a("span",{staticClass:"shtitle"},[t._v("义乌街道")])]),a("Col",{attrs:{span:"17"}},[a("Select",{staticClass:"shinput",attrs:{placeholder:"义乌街道"},model:{value:t.formValidate.yw_street_id,callback:function(e){t.$set(t.formValidate,"yw_street_id",e)},expression:"formValidate.yw_street_id"}},t._l(t.yiwuStreetList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1),[a("Col",{attrs:{xs:24,sm:12,md:8,lg:6}},[a("Col",{staticClass:"shtitle",attrs:{span:"5"}},[a("span",{staticClass:"shtitle"},[t._v("企业类型")])]),a("Col",{attrs:{span:"17"}},[a("Select",{staticClass:"shinput",attrs:{placeholder:"企业类型"},model:{value:t.formValidate.classify_name,callback:function(e){t.$set(t.formValidate,"classify_name",e)},expression:"formValidate.classify_name"}},t._l(t.companyclassifyList,(function(e,i){return a("Option",{key:e.id,attrs:{value:e.classify_name}},[t._v(t._s(e.classify_name))])})),1)],1)],1),a("Col",{attrs:{xs:24,sm:12,md:8,lg:6}},[a("Col",{staticClass:"shtitle",attrs:{span:"5"}},[a("span",{staticClass:"shtitle"},[t._v("联络人手机号")])]),a("Col",{attrs:{span:"17"}},[a("Input",{staticClass:"shinput",attrs:{placeholder:"请输入","element-id":"link_phone",clearable:""},model:{value:t.formValidate.link_phone,callback:function(e){t.$set(t.formValidate,"link_phone",e)},expression:"formValidate.link_phone"}})],1)],1),a("Col",{staticClass:"ivu-text-right userFrom",attrs:{xs:14,sm:12,md:8,lg:6}},[a("Button",{staticClass:"mr15",attrs:{type:"primary",icon:"ios-search",label:"default"},on:{click:t.Searchs}},[t._v("搜索")]),a("Button",{staticClass:"ResetSearch",on:{click:function(e){return t.reset("leave")}}},[t._v("重置")])],1)]],2)],1)],1),a("Table",{ref:"table",staticClass:"mt25",attrs:{columns:t.columns1,data:t.list,"no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果",loading:t.loading,"highlight-row":""},on:{"on-selection-change":t.onSelectTab,"on-sort-change":t.sortChanged,"on-select-all":t.selectAll,"on-select-all-cancel":t.selectAll,"on-select-cancel":t.selectAll},scopedSlots:t._u([{key:"image",fn:function(e){var i=e.row;return[i.company_qrcode?a("viewer",[a("div",{staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.company_qrcode,expression:"row.company_qrcode"}]})])]):t._e()]}},{key:"travel_img",fn:function(t){var e=t.row;return[a("viewer",[a("div",{staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.travel_img,expression:"row.travel_img"}]})])])]}},{key:"action",fn:function(e){var i=e.row;return[a("Button",{on:{click:function(e){return t.removesubscribe(i.id)}}},[t._v("取消关注")])]}}])}),a("div",{staticClass:"acea-row row-right page"},[a("Page",{attrs:{total:t.total,current:t.formValidate.page,"show-elevator":"","show-total":"","show-sizer":"","page-size-opts":[5,10,15,20],"page-size":t.formValidate.size},on:{"on-page-size-change":t.sizeChange,"on-change":t.pageChange}})],1)],1)],1)},s=[],n=a("a34a"),o=a.n(n),l=a("2f62"),r=a("8593"),c=a("fcac"),d=a("4328"),u=a.n(d),f=(a("2e83"),a("5f87")),m=a("3f2a"),h=a("d00d"),p=a("6112");function g(t,e,a,i,s,n,o){try{var l=t[n](o),r=l.value}catch(c){return void a(c)}l.done?e(r):Promise.resolve(r).then(i,s)}function y(t){return function(){var e=this,a=arguments;return new Promise((function(i,s){var n=t.apply(e,a);function o(t){g(n,i,s,o,l,"next",t)}function l(t){g(n,i,s,o,l,"throw",t)}o(void 0)}))}}function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(a,!0).forEach((function(e){b(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var w={components:{template:p["a"]},name:"company_list",mixins:[h["a"]],data:function(){var t=this;return{FormValue:{user_name:""},linkPersonInfo:"",addsubscribe:!0,ruleValidate:{classify_name:[{required:!0,message:"必填",trigger:"blur"}]},formcompanyClassify:{company_ids:",",classify_id:""},edittitle:"编辑企业类型",editmodal:!1,editformValidate:{},companyid:"",dialogvisable:!1,dialogdata:[],pages:1,company_id:0,collapse:!1,token:"Bearer "+Object(f["a"])(),modal1:!1,fileurlL:"/adminapi/file/tmp/upload?token="+Object(f["a"])(),grid:{xl:7,lg:7,md:12,sm:24,xs:24},total:0,total_1:0,loading:!1,roleData:{status1:""},dataList:[],formSelection:[],selectionList:[],selectionCopy:[],checkBox:!1,array_ids:[],user_ids:"",formValidate:{page:1,size:10},list:[],columns1:[{width:60,align:"center",renderHeader:function(e,a){return e("div",{class:{"select-panel":!0},on:{mouseenter:function(e){t.display="block"},mouseleave:function(e){t.display="none"}}},[e("Checkbox",{props:{value:t.checkBox},on:{"on-change":function(e){t.checkBox=e,t.$refs.table.selectAll(t.checkBox),t.isAll=e?0:-1}}})])},render:function(e,a){return e("Checkbox",{props:{value:a.row.checkBox},on:{"on-change":function(e){e?t.formSelection.push(a.row):(t.checkBox=!1,t.formSelection.forEach((function(e,i){e.id===a.row.id&&t.formSelection.splice(i,1)}))),t.ids=t.formSelection.map((function(t){return t.id})),a.row.checkBox=e,t.list[a.index].checkBox=e}},ref:"checkbox",refInFor:!0})}},{title:"序号",key:"order",width:50},{title:"统一社会信用代码",key:"credit_code",width:120},{title:"企业名称",key:"name",width:120},{title:"联络人",key:"link_name",width:50},{title:"联络人手机号",key:"link_phone",width:90},{title:"企业类型",key:"classify_name",width:100},{title:"所属街道",key:"yw_street",width:80},{title:"社区",key:"community",width:80},{title:"地址",key:"addr",width:130},{title:"员工数",key:"user_count",width:70,sortable:!0},{title:"2天内检测率",key:"two_rate",width:80},{title:"7天内检测率",key:"seven_rate",width:80},{title:"70天内检测率",key:"seventy_rate",width:85},{title:"二维码",slot:"image",width:100},{title:"操作",slot:"action",width:100}],FromData:null,modalTitleSs:"",ids:Number,srcList:[],excelDatamodals:!1,excelData:!0,select_name:"",downloadProgress:0,button_loading:!1,downloadstr:"批量下载",showcompanyClassify:!1,companyclassifyList:[]}},computed:v({},Object(l["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:50},labelPosition:function(){return this.isMobile?"top":"left"}}),created:function(){this.getSmpling()},methods:{handleSubmit:function(t){var e=this;if("formcompanyClassify"==t){var a={company_ids:",",classify_id:this.formcompanyClassify.classify_id};this.formSelection.forEach((function(t){a.company_ids=a.company_ids+t.id+","})),Object(c["e"])(a).then((function(t){var a=t.data;200==a.code?(e.$Message.success(a.msg),e.getSmpling(),e.showcompanyClassify=!1):e.$Message.error(a.msg)}))}},setcompanyClassify:function(){var t=this.formSelection;t.length?this.showcompanyClassify=!0:this.$Message.error("请先选择操作的数据")},onSelectTab:function(t){this.selectionList=t;var e=[];this.selectionList.map((function(t){e.push(t.uid)})),this.array_ids=e,this.user_ids=e.join(",")},selectAll:function(t){var e=this;t.length?(this.formSelection=t,this.selectionCopy=t):this.formSelection=[],this.selectionCopy.forEach((function(t,a){t.checkBox=e.checkBox,e.$set(e.list,a,t)}))},sortChanged:function(t){this.formValidate[t.key]=t.order,this.getSmpling()},getcompanyClassify:function(){var t=this;Object(c["b"])().then((function(e){t.companyclassifyList=e.data.data}))},exports:function(){this.getExportsApi()},getExportsApi:function(){var t=y(o.a.mark((function t(){var e,a,i,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.button_loading=!0,[],[],[],"",e=Object.assign({},this.formValidate),delete e.size,delete e.page,delete e.end_date,delete e.start_date,a=JSON.parse(JSON.stringify(e)),t.next=10,this.getExcelData(a);case 10:if(i=t.sent,400!=i.code){t.next=15;break}return this.$Message.error(i.msg),this.button_loading=!1,t.abrupt("return");case 15:return s=i.data.path,this.send_count=0,this.getCsvProgress(s),t.abrupt("return");case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getCsvProgress:function(t){var e=this;Object(m["s"])({path:t}).then((function(a){var i=a.data;if(100==i.data.progress)e.button_loading=!1,e.downloadstr="批量下载",window.open(t+"?"+Date.now());else{e.downloadProgress=i.data.progress,e.downloadstr=e.downloadProgress+"%";var s=e;setTimeout((function(){s.getCsvProgress(t)}),1e3)}}))},excelishas:function(t){var e=this;if(20==this.send_count)return this.button_loading=!1,void this.$Message.error("请求失败");Object(r["G"])(t).then((function(a){if(console.log(t,"str"),200==a.data.code)e.button_loading=!1,window.open(t+"?"+Date.now());else{console.log(a.data.msg,"失败");var i=e;setTimeout((function(){i.excelishas(t),i.send_count++}),1e3)}}))},getExcelData:function(t){return new Promise((function(e,a){console.log(t),Object(m["b"])(t).then((function(t){return e(t.data)}))}))},reset:function(t){this.formValidate={keyword:"",page:1,size:20},this.getSmpling()},exportfuntion:function(){return console.log(this.token),"http://localhost:8080/adminapi/export/sampleOrgan?"+u.a.stringify(this.formValidate)},onCancel:function(){},ok:function(){},cancel:function(){},handleSuccess:function(t,e,a){var i=this,s={path:t.data.src};sampleOrganVerify(s).then((function(t){console.log(t.data.data,"resData"),i.excelDatamodals=!0,i.excelData=t.data.data,i.getSmpling()}))},openItImage:function(t,e){this.srcList=[],this.srcList=t,this.select_name=e,this.modal1=!0},getSmpling:function(){var t=this;this.loading=!0,this.formSelection=[],this.selectionList=[],this.selectionCopy=[],this.checkBox=!1,Object(c["o"])(this.formValidate).then((function(e){t.loading=!1,console.log(e.data),t.list=e.data.data.data,t.total=e.data.data.total,t.list.map((function(e,a){e.order=(t.formValidate.page-1)*t.formValidate.size+a+1,e.checkBox=!1}))}))},sizeChange:function(t){this.formValidate.size=t,this.getSmpling(),this.$refs.table.clearCurrentRow()},pageChange:function(t){this.formValidate.page=t,this.getSmpling()},editt:function(t){this.editformValidate=t,this.roleid=t.id,this.edittitle="编辑企业类型分类",this.editmodal=!0},edit:function(t){var e=this;this.dialogvisable=!0,this.company_id=t.id,console.log(t);var a={company_id:t.id,page:1};this.companyid=t.id,Object(c["d"])(a).then((function(t){console.log(t.data.data),e.dialogdata=t.data.data.data,e.linkPersonInfo=t.data.data.link,e.total_1=t.data.data.total,e.pages=1}))},Searchs:function(){this.formValidate.page=1,this.getSmpling()},updateperson:function(t){var e=this,a={staff_id:t.id,company_id:t.company_id};Object(c["q"])(a).then((function(t){console.log(t,"111111"),200==t.data.code&&e.$Message.info("设置成功")}))},searchperson:function(){var t=this,e={company_id:this.company_id,page:1,user_name:this.FormValue.user_name};Object(c["d"])(e).then((function(e){console.log(e.data.data),t.dialogdata=e.data.data.data,t.total_1=e.data.data.total,t.pages=1}))},changepages:function(t){var e=this,a={page:t,company_id:this.companyid};console.log(t,"1111"),Object(c["d"])(a).then((function(t){console.log(t.data.data),e.dialogdata=t.data.data.data,e.total_1=t.data.data.total,e.pages=t.data.data.page}))},removesubscribe:function(t){var e=this;Object(c["p"])({company_id:t}).then((function(t){if(console.log(t.data),200==t.data.code)return e.$Message.success(t.data.msg)}))}}},C=w,k=(a("9e6d"),a("992d"),a("2877")),x=Object(k["a"])(C,i,s,!1,null,"7b752d30",null);e["default"]=x.exports},"57cf":function(t,e,a){},"87f4":function(t,e,a){},"992d":function(t,e,a){"use strict";var i=a("87f4"),s=a.n(i);s.a},"9e6d":function(t,e,a){"use strict";var i=a("57cf"),s=a.n(i);s.a}}]);