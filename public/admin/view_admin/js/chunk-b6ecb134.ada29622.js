(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6ecb134"],{"0ab7":function(t,e,a){"use strict";a.d(e,"g",(function(){return i})),a.d(e,"r",(function(){return n})),a.d(e,"k",(function(){return l})),a.d(e,"j",(function(){return o})),a.d(e,"i",(function(){return c})),a.d(e,"l",(function(){return s})),a.d(e,"f",(function(){return u})),a.d(e,"h",(function(){return d})),a.d(e,"m",(function(){return m})),a.d(e,"p",(function(){return f})),a.d(e,"n",(function(){return p})),a.d(e,"o",(function(){return h})),a.d(e,"e",(function(){return b})),a.d(e,"s",(function(){return _})),a.d(e,"a",(function(){return v})),a.d(e,"b",(function(){return g})),a.d(e,"d",(function(){return y})),a.d(e,"c",(function(){return k})),a.d(e,"q",(function(){return O}));var r=a("b6bd");function i(t){return Object(r["a"])({url:"owndeclare",method:"get",params:t})}function n(){return Object(r["a"])({url:"place/type",method:"get"})}function l(t){return Object(r["a"])({url:"barrier_district",method:"POST",params:t})}function o(t){return Object(r["a"])({url:"barrier_district",method:"get",params:t})}function c(t){return Object(r["a"])({url:"barrier_district/".concat(t),method:"get"})}function s(t,e){return Object(r["a"])({url:"barrier_district/".concat(t),method:"put",params:e})}function u(t){return Object(r["a"])({url:"cardeclare",method:"get",params:t})}function d(t){return Object(r["a"])({url:"placedeclare",method:"get",params:t})}function m(t){return Object(r["a"])({url:"place",method:"get",params:t})}function f(t){return Object(r["a"])({url:"place/".concat(t),method:"get"})}function p(t){return Object(r["a"])({url:"place",method:"POST",params:t})}function h(t,e){return Object(r["a"])({url:"place/".concat(t),method:"put",params:e})}function b(t){return Object(r["a"])({url:"place/delete_list",method:"get",params:t})}function _(t){return Object(r["a"])({url:"hsjc/result/log",method:"get",params:t})}function v(t){return Object(r["a"])({url:"user/sub_change",method:"get",params:t})}function g(t){return Object(r["a"])({url:"csv/user/sub_change",method:"get",params:t})}function y(t){return Object(r["a"])({url:"place/batchUpdateXcmLevel",method:"post",data:t})}function k(t){return Object(r["a"])({url:"place/batchUpdateIsNeedFace",method:"post",data:t})}function O(t){return Object(r["a"])({url:"placedeclare/node",method:"get",params:t})}},5574:function(t,e,a){"use strict";var r=a("9b16"),i=a.n(r);i.a},"5f87":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var r=a("a78e"),i=a.n(r),n="admin-token";function l(){return i.a.get(n)}},"9b16":function(t,e,a){},a224:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cascader-panel"},[a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("Tabs",{model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("TabPane",{attrs:{label:"场所码编辑",name:"1"}})],1),a("Form",{ref:"formValidate",staticClass:"formValidate mt20",attrs:{rules:t.ruleValidate,model:t.formValidate,"label-width":t.labelWidth,"label-position":t.labelPosition,inline:""},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Form-item",{attrs:{label:"场所名称"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"输入单位名称"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name",e)},expression:"formValidate.name"}})],1),a("Form-item",{attrs:{label:"简称"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"简称"},model:{value:t.formValidate.short_name,callback:function(e){t.$set(t.formValidate,"short_name",e)},expression:"formValidate.short_name"}})],1),a("Form-item",{attrs:{label:"企业信用代码"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"企业信用代码"},model:{value:t.formValidate.credit_code,callback:function(e){t.$set(t.formValidate,"credit_code",e)},expression:"formValidate.credit_code"}})],1),a("Form-item",{attrs:{label:"社区/村委会"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"社区/村委会"},model:{value:t.formValidate.community,callback:function(e){t.$set(t.formValidate,"community",e)},expression:"formValidate.community"}})],1),a("Form-item",{attrs:{label:"上级主管部门"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"上级主管部门"},model:{value:t.formValidate.superior_gov,callback:function(e){t.$set(t.formValidate,"superior_gov",e)},expression:"formValidate.superior_gov"}})],1),a("Form-item",{attrs:{label:"街道/镇街"}},[a("Select",{staticStyle:{width:"250px"},on:{"on-change":t.select_risk_level},model:{value:t.formValidate.yw_street_id,callback:function(e){t.$set(t.formValidate,"yw_street_id",e)},expression:"formValidate.yw_street_id"}},t._l(t.riskYiwuStreetList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),a("Form-item",{attrs:{label:"地址"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"地址"},model:{value:t.formValidate.addr,callback:function(e){t.$set(t.formValidate,"addr",e)},expression:"formValidate.addr"}})],1),a("Form-item",{attrs:{label:"场所分类"}},[a("Select",{staticStyle:{width:"250px"},model:{value:t.formValidate.place_classify,callback:function(e){t.$set(t.formValidate,"place_classify",e)},expression:"formValidate.place_classify"}},t._l(t.place_classifylist,(function(e,r){return a("Option",{key:r,attrs:{value:e.value}},[t._v(t._s(e.name))])})),1)],1),a("Form-item",{attrs:{label:"行业类型"}},[a("Select",{staticStyle:{width:"250px"},on:{"on-change":t.setplacetype},model:{value:t.formValidate.place_type_id,callback:function(e){t.$set(t.formValidate,"place_type_id",e)},expression:"formValidate.place_type_id"}},t._l(t.place_list,(function(e,r){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.place_type))])})),1)],1),a("Form-item",{attrs:{label:"联络员"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"联络员"},model:{value:t.formValidate.link_man,callback:function(e){t.$set(t.formValidate,"link_man",e)},expression:"formValidate.link_man"}})],1),a("Form-item",{attrs:{label:"联系电话"}},[a("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"联系电话"},model:{value:t.formValidate.link_phone,callback:function(e){t.$set(t.formValidate,"link_phone",e)},expression:"formValidate.link_phone"}})],1),a("Form-item",{attrs:{label:"行程卡校验等级"}},[a("Select",{staticStyle:{width:"250px"},model:{value:t.formValidate.xcm_level,callback:function(e){t.$set(t.formValidate,"xcm_level",e)},expression:"formValidate.xcm_level"}},t._l(t.xcm_levels,(function(e,r){return a("Option",{key:e.no,attrs:{value:e.no}},[t._v(t._s(e.title))])})),1)],1),a("Row",[a("Form-item",{attrs:{label:"是否需要人脸识别"}},[a("i-switch",{attrs:{"true-value":1,"false-value":0},model:{value:t.formValidate.is_need_face,callback:function(e){t.$set(t.formValidate,"is_need_face",e)},expression:"formValidate.is_need_face"}})],1),a("Form-item",{attrs:{label:"场所码"}},[t.formValidate.applet_qrcode?a("viewer",[a("div",{staticClass:"tabBox_img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.applet_qrcode,expression:"formValidate.applet_qrcode"}]})])]):t._e()],1),a("Form-item",{attrs:{label:"水印地址"}},[t.formValidate.watermark_url?a("div",{staticClass:"demo-upload-list"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.watermark_url,expression:"formValidate.watermark_url"}]}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(e){return t.handleView()}}}),a("Icon",{attrs:{type:"ios-trash-outline"},on:{click:function(e){return t.handleRemove()}}})],1)]):t._e(),a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":t.defaultList,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":10,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,multiple:"",type:"drag",action:t.fileurlL,headers:{"Authori-zation":t.token}}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),a("Modal",{attrs:{title:"查看图片"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?a("img",{staticStyle:{width:"100%"},attrs:{src:t.formValidate.watermark_url}}):t._e()])],1)],1),a("Row",[a("Button",{staticStyle:{"margin-left":"35%","margin-right":"10px"},attrs:{to:{path:"/admin/riskdistrict/riskdistrictCsm"}}},[t._v("返回")]),a("Button",{staticStyle:{margin:"0 10px"},attrs:{type:"primary"},on:{click:function(e){return t.handlefind("formValidate")}}},[t._v("提交")])],1)],1)],1)],1)},i=[],n=a("5f87"),l=a("2f62"),o=a("e86e"),c=a("0ab7");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(a,!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m={computed:u({},Object(l["e"])("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:120},labelPosition:function(){return this.isMobile?"top":"right"},labelBottom:function(){return this.isMobile?void 0:15}}),data:function(){return{fileurlL:"/adminapi/file/tmp/upload?token="+Object(n["a"])(),token:"Bearer "+Object(n["a"])(),defaultList:[],visible:!1,disabledSelectIt:!0,xcm_levels:[{no:0,title:"不弹窗"},{no:1,title:"中高风险"},{no:2,title:"再次校验高风险地区"}],optionProps:{value:"id",label:"name",children:"children",emitPath:!0,checkStrictly:!0},place_list:[],csNameList:[],riskYiwuStreetList:[],place_classifylist:[{name:"党政机关",value:"gov"},{name:"企业单位",value:"company"},{name:"其他",value:"other"}],formValidate:{name:"",yw_street_id:"",is_need_face:!1},risk_level_text:"",currentTab:"1",ruleValidate:{}}},mounted:function(){this.$Message.config({top:110,duration:3}),this.level=0,this.getplacelist(),this.getdistrictLiandon(),this.dataUid=this.$route.params.id,"0"!==this.$route.params.id&&this.$route.params.id&&(this.adminapiriskdistrict_get(this.$route.params.id),this.defaultList=[{name:this.formValidate.watermark_url,url:this.formValidate.watermark_url}])},methods:{validDataUrl:function(t){var e=/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)\s*$/i;return e.test(t)},getplacelist:function(){var t=this;Object(c["r"])().then((function(e){t.place_list=e.data.data}))},base64ToFile:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FILT",a=t.split(","),r=a[0].match(/:(.*?);/)[1],i=atob(a[1]),n=i.length,l=new Uint8Array(n);while(n--)l[n]=i.charCodeAt(n);return new File([l],e,{type:r})},adminapiriskdistrict_get:function(t){var e=this;Object(c["p"])(t).then((function(t){for(var a=t.data.data,r=Object.keys(a),i=0,n=r;i<n.length;i++){var l=n[i];e.formValidate[l]=a[l]}}))},setplacetype:function(t){var e=this.place_list.filter((function(e){if(t==e.id)return e}));this.formValidate.place_type=e[0].place_type,console.log(e)},getdistrictLiandon:function(){var t=this;Object(o["f"])({pid:2832}).then((function(e){t.riskYiwuStreetList=e.data.data,console.log(t.riskYiwuStreetList,"riskYiwuStreetList")}))},select_risk_level:function(t){this.formValidate.yw_street_id=t},handlefind:function(t){var e=this;if("0"!==this.$route.params.id&&this.$route.params.id){var a=JSON.parse(JSON.stringify(this.formValidate));if(delete a.applet_qrcode,!a.superior_gov)return void this.$Message.error("请输入上级主管部门参数");Object(c["o"])(a.id,a).then((function(t){400!=t.data.code?(e.$Message.success(t.data.msg),setTimeout((function(){e.$router.push({path:"/admin/riskdistrict/riskdistrictCsm",query:{type:"add"}})}),500)):e.$Message.error(t.data.msg)}))}else Object(c["n"])(this.formValidate).then((function(t){200!==t.data.code?e.$Message.error(t.data.msg):(e.$Message.success(t.data.msg),setTimeout((function(){e.$router.push({path:"/admin/riskdistrict/riskdistrictCsm",query:{type:"add"}})}),500))}))},handleView:function(t){this.visible=!0},handleRemove:function(t){this.formValidate.watermark_url="",this.defaultList=[],this.$refs.upload.fileList=[]},handleSuccess:function(t,e){this.formValidate.watermark_url=t.data.src,this.$refs.upload.fileList=[{name:t.data.src,url:t.data.src}],this.defaultList=[{name:t.data.src,url:t.data.src}]},handleFormatError:function(){this.$Message.error("图片仅限 jpg,jpeg,png")},handleMaxSize:function(){this.$Message.error("图片大小应小于10K")}}},f=m,p=(a("5574"),a("2877")),h=Object(p["a"])(f,r,i,!1,null,null,null);e["default"]=h.exports},e86e:function(t,e,a){"use strict";a.d(e,"h",(function(){return i})),a.d(e,"f",(function(){return n})),a.d(e,"g",(function(){return l})),a.d(e,"c",(function(){return o})),a.d(e,"k",(function(){return c})),a.d(e,"n",(function(){return s})),a.d(e,"l",(function(){return u})),a.d(e,"j",(function(){return d})),a.d(e,"m",(function(){return m})),a.d(e,"a",(function(){return f})),a.d(e,"b",(function(){return p})),a.d(e,"e",(function(){return h})),a.d(e,"d",(function(){return b})),a.d(e,"i",(function(){return _}));var r=a("b6bd");function i(t){return Object(r["a"])({url:"riskdistrict",method:"get",params:t})}function n(t){return Object(r["a"])({url:"district",method:"get",params:t})}function l(t){return Object(r["a"])({url:"riskdistrictPro",method:"get",params:t})}function o(t){return Object(r["a"])({url:"riskdistrictPro/".concat(t),method:"get"})}function c(t){return Object(r["a"])({url:"riskdistrictPro",method:"post",data:t})}function s(t,e){return Object(r["a"])({url:"riskdistrictPro/".concat(t),method:"put",data:e})}function u(t){return Object(r["a"])({url:"place/restore/".concat(t),method:"post"})}function d(t){return Object(r["a"])({url:"/riskdistrict",method:"post",data:t})}function m(t,e){return Object(r["a"])({url:"/riskdistrict/".concat(t),method:"put",data:e})}function f(t){return Object(r["a"])({url:"riskdistrict/".concat(t),method:"get"})}function p(t){return Object(r["a"])({url:"community",method:"get",params:t})}function h(t){return Object(r["a"])({url:"user/user",method:"get",params:t})}function b(t){return Object(r["a"])({url:"user/manager",method:"get",params:t})}function _(t){return Object(r["a"])({url:"user/manager",method:"post",data:t})}}}]);