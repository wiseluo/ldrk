webpackJsonp([3],{"Sdk+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("xFmM"),n=a("95YI"),i=a.n(n),o=a("tOjG"),l=a("/vAn"),r=a("VU/8")(null,null,!1,null,null,null).exports,c=a("Fd2+"),u=a("4ecV"),m=a("mLC4"),d=a("YtZX"),f=a("7+uW"),h={components:{VDistpicker:i.a,newsuccess:l.a,licensePlate:r},mixins:[m.a,d.a],data:function(){return{routerName:"truckDeclaration",beifenPlateNUmber:"",queryData:{licenseNumber:!0},successInfo:{},successShow:!1,isHide:!1,show:!1,areaList:o.areaList,cascaderValue:"",juzhudiValue:"",columns:[],loading:!0,showDiagler:!1,smsCode:"",minDate:new Date(2020,0,1),maxDate:new Date(2025,10,1),currentDate:new Date(2021,0,17),idCardTypeColums:[{value:"id",text:"身份证"},{value:"passport",text:"护照号"},{value:"officer",text:"军官证号"}],showPickerUploader:!1,columnsJuzhudi:[],showPicker:!1,showPicker2:!1,showPickerDate:!1,showPickerDate_fh:!1,showPicker_idCardType:!1,showPicker_juzhudi:!1,fileList:[],formValute:{real_name:"",phone:"",id_card:"",has_report:0},formValute_text:{province:"",city:"",street:"",county:""},checked:!1,value:"",sms:"",smsIF:!1,setTime:"",columns2:[],smsdJS:60,newData:[],selectuID_FirstList:[],selectList_FirstIndex:[],selectList_SecondIndex:[],levelTwo_BySelect_GetList_Is:[],selectListSecond:[],acData_second:0,acData:0,isFirst:!1,successInfo_car:{},msg:1}},created:function(){this.isFirst=!0},computed:{},destroyed:function(){var e=this;document.removeEventListener("click",function(t){"关闭"===t.target.innerHTML&&(f.a.set(e.formValute,"plate_number",e.beifenPlateNUmber),e.$forceUpdate())})},mounted:function(){var e=this;window.addEventListener("click",function(t){"关闭"===t.target.innerHTML&&(f.a.set(e.formValute,"plate_number",e.beifenPlateNUmber),e.$forceUpdate())})},methods:{onClose:function(){console.log(this.$refs.License.close())},jianting:function(){this.formValute.plate_number&&(this.beifenPlateNUmber=this.formValute.plate_number,f.a.set(this.formValute,"plate_number",""),this.$forceUpdate())},clearPlateNumber:function(){f.a.set(this.formValute,"plate_number",""),this.$forceUpdate(),console.log(this.formValute)},handleInput:function(e){this.formValute.plate_number=e},setSuccessInfoNull:function(){s.a.set("successInfo_clareTravel",null),this.successInfo_car=null},closeSparingContent:function(e){this.show=e},imagevalidator:function(){return!!this.formValute.image},onInput:function(e){this.formValute.has_report=e?1:0},onSubmit:function(e){var t=this.formValute;if(!t.real_name)return c.b.fail("请输入姓名"),!1;var a=new RegExp("[^a-zA-Z0-9_一-龥]","i");if(a.test(t.real_name))return console.log(t.real_name,a.test(t.real_name)),c.b.fail("姓名不能包含特殊字符"),!1;if("id"===this.formValute.card_type&&/\d+|\w+/.test(t.real_name))return c.b.fail("姓名不能包含字母或数字"),!1;if(!t.id_card)return c.b.fail("请输入证件号"),!1;if("id"===this.formValute.card_type){if(!/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(t.id_card))return c.b.fail("证件号格式错误"),!1;console.log("校验")}if(!t.plate_number)return c.b.fail("请输入车牌号"),!1;if(!t.phone)return c.b.fail("请输入手机号"),!1;return/^1\d{10}$/.test(t.phone)?t.sms_code?t.sms_code.length<6?(c.b.fail("验证码长度不足6位"),!1):(this.qgrkk({real_name:this.formValute.real_name,id_card:this.formValute.id_card}),void this.setSuccessInfoNull()):(c.b.fail("请输入验证码"),!1):(c.b.fail("手机号格式错误"),!1)},getsms:function(){var e=this;Object(u.k)({prefix:"declare_verify",phone:this.formValute.phone}).then(function(t){200===t.code?(e.smsIF=!0,e.showDiagler=!0,e.djsSms(),c.b.success(t.msg)):c.b.fail(t.msg)})},djsSms:function(){var e=this;this.smsdJS=this.smsdJS-1,this.smsIF=!0,this.smsdJS<=0?(this.smsIF=!1,this.smsdJS=60,clearTimeout(this.setTime)):this.setTime=setTimeout(function(){e.djsSms()},1e3)},afterRead:function(e){var t=this;e.status="uploading",e.message="上传中...",console.log(e),Object(u.n)({file:e.content}).then(function(a){200===a.code?(console.log(a.data),t.formValute.travel_img=a.data.src,e.status="done",e.message="上传成功"):(e.status="failed",e.message="上传失败")}).catch(function(t){e.status="failed",e.message="上传失败"})},choose:function(){this.show=!this.show},goBack:function(){this.$router.back(-1)},onChangeProvince:function(e){console.log(e),this.formValute.laiyuandi.province=e},onConfirm_Date:function(e){this.showPickerDate=!1,this.formValute.arrival_time=this.$dateTimeFilters(e,"yyyy-MM-dd")},asyncValidator:function(e){return"身份证"!==this.formValute.card_type_text||/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(e)},eventIfSelect:function(){this.formValute.card_type_text||c.b.fail("请先选择证件类型")},back:function(){this.$router.push({path:"/"})}}},p={render:function(){var e=this,t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"zizhushegnbao"},[s("meta",{attrs:{name:"viewport",content:"width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"main"},[s("div",{staticClass:"title"},[s("van-button",{staticStyle:{"background-color":"#565353 !important",border:"0"},attrs:{to:"/",icon:"arrow-left",type:"primary"}}),s("span",{staticStyle:{margin:"0 auto"}},[t._v("货车申报")])],1),t._v(" "),s("van-field",{staticClass:"zizhushengbaoFiled",attrs:{"label-class":"zizhushengbaoLabel",placeholder:"请输入姓名",rules:[{required:!0,message:"请填写姓名"}],label:"姓名："},model:{value:t.formValute.real_name,callback:function(e){t.$set(t.formValute,"real_name",e)},expression:"formValute.real_name"}}),t._v(" "),s("van-field",{staticClass:"zizhushengbaoFiled",attrs:{"label-class":"zizhushengbaoLabel",placeholder:"请输入正确的证件号",rules:[{validator:t.asyncValidator,message:"请输入正确的证件号"}],label:"身份证号："},on:{input:function(){e.formValute.id_card=e.formValute.id_card.replace(/[^\w\.\/]/g,"")}},model:{value:t.formValute.id_card,callback:function(e){t.$set(t.formValute,"id_card",e)},expression:"formValute.id_card"}}),t._v(" "),s("LicenseKeyboard",{ref:"License",on:{confirm:t.handleInput},model:{value:t.queryData.licenseNumber,callback:function(e){t.$set(t.queryData,"licenseNumber",e)},expression:"queryData.licenseNumber"}},[s("van-field",{staticClass:"zizhushengbaoFiled",attrs:{"label-class":"zizhushengbaoLabel",clearable:"",readonly:"",placeholder:"请选择车牌号",rules:[{required:!0,message:"请填写姓名"}],label:"车牌号："},on:{click:t.jianting},scopedSlots:t._u([{key:"extra",fn:function(){return[t.formValute.plate_number?s("van-icon",{staticStyle:{"font-size":"1.125rem"},attrs:{name:"cross"},on:{click:function(e){return e.stopPropagation(),t.clearPlateNumber(e)}}}):t._e()]},proxy:!0}]),model:{value:t.formValute.plate_number,callback:function(e){t.$set(t.formValute,"plate_number",e)},expression:"formValute.plate_number"}})],1),t._v(" "),s("van-field",{staticClass:"zizhushengbaoFiled",attrs:{"label-class":"zizhushengbaoLabel",center:"",clearable:"",type:"number",placeholder:"请输入手机号",rules:[{required:!0,message:"请填写手机号"}],label:"手机号："},model:{value:t.formValute.phone,callback:function(e){t.$set(t.formValute,"phone",e)},expression:"formValute.phone"}}),t._v(" "),s("van-field",{staticClass:"zizhushengbaoFiled",attrs:{placeholder:""===t.formValute.phone?"请先输入手机号":"请输入验证码",readonly:!t.formValute.phone,"label-class":"zizhushengbaoLabel",center:"",clearable:"",label:"验证码："},scopedSlots:t._u([{key:"button",fn:function(){return[t.smsIF?s("van-button",{staticClass:"gray",attrs:{size:"small",type:"primary","native-type":"button",disabled:""}},[t._v("获取验证码"),s("span",[t._v(t._s(t.smsdJS))])]):s("van-button",{attrs:{size:"small",type:"primary","native-type":"button"},on:{click:t.getsms}},[t._v("获取验证码")])]},proxy:!0}]),model:{value:t.formValute.sms_code,callback:function(e){t.$set(t.formValute,"sms_code",e)},expression:"formValute.sms_code"}}),t._v(" "),s("van-button",{staticClass:"submit",attrs:{type:"primary",block:"","native-type":"submit"},on:{click:t.onSubmit}},[t._v("提交")]),t._v(" "),s("van-dialog",{attrs:{title:"点击下面方框选择行程码","show-cancel-button":""},model:{value:t.showPickerUploader,callback:function(e){t.showPickerUploader=e},expression:"showPickerUploader"}},[s("van-uploader",{attrs:{"max-count":"1","after-read":t.afterRead},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1)],1),t._v(" "),s("van-overlay",{attrs:{show:t.overlay}},[s("van-loading",{staticStyle:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},attrs:{size:"24px",vertical:""}},[t._v("正在校验姓名和身份证号码")])],1),t._v(" "),t.show?s("newsuccess",{staticClass:"fixedPOstion",attrs:{dataList:t.formValute,dataList_text:t.formValute_text,fileList:t.fileList,id_verify_result:t.id_verify_result,successShow:t.successShow,successInfo_car:t.successInfo_car,getRoute:t.routerName},on:{"update:successShow":function(e){t.successShow=e},"update:success-show":function(e){t.successShow=e},closeSparingContent:function(e){return t.closeSparingContent(e)},Back:function(e){return t.back(e)}}}):t._e()],1)},staticRenderFns:[]};var b=a("VU/8")(h,p,!1,function(e){a("jKFQ"),a("oN/g")},"data-v-7e0a45ba",null);t.default=b.exports},jKFQ:function(e,t){},"oN/g":function(e,t){}});
//# sourceMappingURL=3.6fe00d2194116babd440.js.map